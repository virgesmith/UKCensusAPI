
cache: packages
sudo: false

matrix:
  include:
    - language: r
      r: oldrel
      env:
        - RETICULATE_PYTHON=$(which python3)
      # install the python package first
      before_install:
        - pip3 install numpy pandas
        - ./setup.py install
      dist: precise

    - language: r
      r: release
      env:
        - RETICULATE_PYTHON=$(which python3)
      # install the python package first
      before_install:
        - sudo apt install python3-pip -y
        - sudo pip3 install -r requirements.txt
        - ./setup.py install
      dist: trusty

    - language: r
      r: devel
      env:
        - RETICULATE_PYTHON=$(which python3)
      # install the python package first
      before_install:
        - pip3 install numpy pandas
        - ./setup.py install
      dist: trusty

    - language: python
      python: 3.4
      install:
        - pip install -r requirements.txt
      script:
        - python setup.py test

    - language: python
      python: 3.5
      install:
        - pip install -r requirements.txt
      script:
        - python setup.py test

    - language: python
      python: 3.6
      install:
        - pip install -r requirements.txt
      script:
        - python setup.py test

warnings_are_errors: false

notifications:
  email:
    on_success: change
    on_failure: change

